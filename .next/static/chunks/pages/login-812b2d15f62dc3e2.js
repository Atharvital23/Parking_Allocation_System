(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{630:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var a=r(7876),n=r(4250),f=r.n(n),t=r(4232),i=r(9099);function o(){let[e,s]=(0,t.useState)(""),[r,n]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[b,d]=(0,t.useState)("user"),[u,c]=(0,t.useState)(""),x=(0,i.useRouter)(),g=async s=>{s.preventDefault();let a={role:b,password:r};"user"===b?a.email=o:a.username=e;try{let e=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(200===e.status){let s=await e.json();localStorage.setItem("parking_user",JSON.stringify({username:s.username,role:s.role})),x.push("/dashboard")}else if(404===e.status&&"user"===b)x.push("/signup");else{let s=await e.json();c(s.message||"Login failed")}}catch(e){c("An error occurred")}};return(0,a.jsxs)("div",{className:"jsx-ef753073e062bbff login-bg",children:[(0,a.jsxs)("div",{className:"jsx-ef753073e062bbff login-container",children:[(0,a.jsx)("h2",{className:"jsx-ef753073e062bbff",children:"Parking Allocation Login"}),(0,a.jsxs)("div",{className:"jsx-ef753073e062bbff role-group",children:[(0,a.jsxs)("label",{className:"jsx-ef753073e062bbff",children:[(0,a.jsx)("input",{type:"radio",value:"user",checked:"user"===b,onChange:()=>d("user"),className:"jsx-ef753073e062bbff"})," ","User"]}),(0,a.jsxs)("label",{className:"jsx-ef753073e062bbff",children:[(0,a.jsx)("input",{type:"radio",value:"worker",checked:"user"!==b,onChange:()=>d("worker"),className:"jsx-ef753073e062bbff"})," ","Admin/Worker"]})]}),(0,a.jsxs)("form",{onSubmit:g,className:"jsx-ef753073e062bbff",children:["user"===b?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"jsx-ef753073e062bbff input-group",children:[(0,a.jsx)("label",{className:"jsx-ef753073e062bbff",children:"Email"}),(0,a.jsx)("input",{type:"email",value:o,onChange:e=>l(e.target.value),required:!0,placeholder:"Enter your email",className:"jsx-ef753073e062bbff"})]})}):(0,a.jsxs)("div",{className:"jsx-ef753073e062bbff input-group",children:[(0,a.jsx)("label",{className:"jsx-ef753073e062bbff",children:"Username"}),(0,a.jsx)("input",{type:"text",value:e,onChange:e=>s(e.target.value),required:!0,placeholder:"Enter your username",className:"jsx-ef753073e062bbff"})]}),(0,a.jsxs)("div",{className:"jsx-ef753073e062bbff input-group",children:[(0,a.jsx)("label",{className:"jsx-ef753073e062bbff",children:"Password"}),(0,a.jsx)("input",{type:"password",value:r,onChange:e=>n(e.target.value),required:!0,placeholder:"Enter your password",className:"jsx-ef753073e062bbff"})]}),u&&(0,a.jsx)("div",{className:"jsx-ef753073e062bbff error",children:u}),(0,a.jsx)("button",{type:"submit",className:"jsx-ef753073e062bbff login-btn",children:"Login"})]})]}),(0,a.jsx)(f(),{id:"ef753073e062bbff",children:".role-group.jsx-ef753073e062bbff{margin-bottom:1rem}.role-group.jsx-ef753073e062bbff label.jsx-ef753073e062bbff{margin-right:1rem;font-weight:500}.login-bg.jsx-ef753073e062bbff{min-height:100vh;background:linear-gradient(135deg,#2980b9 0%,#6dd5fa 100%);display:flex;align-items:center;justify-content:center}.login-container.jsx-ef753073e062bbff{background:#fff;padding:2.5rem 2rem;border-radius:16px;box-shadow:0 8px 32px rgba(44,62,80,.2);width:100%;max-width:350px;text-align:center}h2.jsx-ef753073e062bbff{margin-bottom:1.5rem;color:#2980b9}.input-group.jsx-ef753073e062bbff{margin-bottom:1.2rem;text-align:left}label.jsx-ef753073e062bbff{display:block;margin-bottom:.4rem;color:#34495e;font-weight:500}input.jsx-ef753073e062bbff{width:100%;padding:.7rem;border:1px solid#b2bec3;border-radius:8px;font-size:1rem;outline:none;transition:border.2s}input.jsx-ef753073e062bbff:focus{border-color:#2980b9}.login-btn.jsx-ef753073e062bbff{width:100%;padding:.8rem;background:linear-gradient(90deg,#2980b9 0%,#6dd5fa 100%);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:bold;cursor:pointer;transition:background.2s}.login-btn.jsx-ef753073e062bbff:hover{background:linear-gradient(90deg,#2574a9 0%,#48c6ef 100%)}.error.jsx-ef753073e062bbff{color:#e74c3c;margin-bottom:1rem;font-size:.98rem}"})]})}},5794:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(630)}])},9099:(e,s,r)=>{e.exports=r(8253)}},e=>{e.O(0,[250,636,593,792],()=>e(e.s=5794)),_N_E=e.O()}]);