"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/parking";
exports.ids = ["pages/api/parking"];
exports.modules = {

/***/ "(api-node)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\n// Use MongoDB Atlas cloud; set your password in MONGODB_URI or replace <db_password>\nconst uri = process.env.MONGODB_URI || \"mongodb+srv://ani:ani123@clusterani.r8dajhu.mongodb.net/\";\nconst options = {};\nlet client;\nlet clientPromise;\nif (!global._mongoClientPromise) {\n    client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n    global._mongoClientPromise = client.connect();\n}\nclientPromise = global._mongoClientPromise;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9tb25nb2RiLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzQztBQUV0QyxxRkFBcUY7QUFDckYsTUFBTUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLElBQUk7QUFDdkMsTUFBTUMsVUFBVSxDQUFDO0FBRWpCLElBQUlDO0FBQ0osSUFBSUM7QUFFSixJQUFJLENBQUNDLE9BQU9DLG1CQUFtQixFQUFFO0lBQy9CSCxTQUFTLElBQUlOLGdEQUFXQSxDQUFDQyxLQUFLSTtJQUM5QkcsT0FBT0MsbUJBQW1CLEdBQUdILE9BQU9JLE9BQU87QUFDN0M7QUFDQUgsZ0JBQWdCQyxPQUFPQyxtQkFBbUI7QUFFMUMsaUVBQWVGLGFBQWFBLEVBQUMiLCJzb3VyY2VzIjpbIkY6XFxNaWNyb1NvZnQtUGFya2luZ19BbGxvY2F0aW9uX1N5c3RlbVxcUGFya2luZy1BbGxvY2F0aW9uLVN5c3RlbVxcbGliXFxtb25nb2RiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcclxuXHJcbi8vIFVzZSBNb25nb0RCIEF0bGFzIGNsb3VkOyBzZXQgeW91ciBwYXNzd29yZCBpbiBNT05HT0RCX1VSSSBvciByZXBsYWNlIDxkYl9wYXNzd29yZD5cclxuY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgfHwgXCJtb25nb2RiK3NydjovL2FuaTphbmkxMjNAY2x1c3RlcmFuaS5yOGRhamh1Lm1vbmdvZGIubmV0L1wiO1xyXG5jb25zdCBvcHRpb25zID0ge307XHJcblxyXG5sZXQgY2xpZW50O1xyXG5sZXQgY2xpZW50UHJvbWlzZTtcclxuXHJcbmlmICghZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UpIHtcclxuICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKTtcclxuICBnbG9iYWwuX21vbmdvQ2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KCk7XHJcbn1cclxuY2xpZW50UHJvbWlzZSA9IGdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xpZW50UHJvbWlzZTtcclxuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwidXJpIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwib3B0aW9ucyIsImNsaWVudCIsImNsaWVudFByb21pc2UiLCJnbG9iYWwiLCJfbW9uZ29DbGllbnRQcm9taXNlIiwiY29ubmVjdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparking&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparking.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparking&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparking.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_parking_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\parking.js */ \"(api-node)/./pages/api/parking.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_parking_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_parking_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/parking\",\n        pathname: \"/api/parking\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_parking_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGcGFya2luZyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDcGFya2luZy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNxRDtBQUNyRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsa0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGtEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHBhcmtpbmcuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3BhcmtpbmdcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wYXJraW5nXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparking&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparking.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/parking.js":
/*!******************************!*\
  !*** ./pages/api/parking.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/mongodb */ \"(api-node)/./lib/mongodb.js\");\n\n// API route to record parking details\nasync function handler(req, res) {\n    if (req.method === 'GET') {\n        // Return all parking details\n        const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        const db = client.db('Parking_ByANI');\n        const records = await db.collection('Parking_Details').find({}).toArray();\n        return res.status(200).json(records);\n    }\n    // Handle payment updates\n    if (req.method === 'PATCH') {\n        const { ticketNo, checkout, spotId, active } = req.body;\n        const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        const db = client.db('Parking_ByANI');\n        try {\n            if (checkout) {\n                // Move parking record to Check_Out collection before removing\n                const parkingCol = db.collection('Parking_Details');\n                const checkOutCol = db.collection('Check_Out');\n                const record = await parkingCol.findOne({\n                    ticketNo\n                });\n                if (!record) {\n                    return res.status(404).json({\n                        message: 'Ticket not found'\n                    });\n                }\n                // Add checkout time\n                record.checkedOutAt = new Date();\n                await checkOutCol.insertOne(record);\n                const result = await parkingCol.deleteOne({\n                    ticketNo\n                });\n                if (result.deletedCount === 1) {\n                    return res.status(200).json({\n                        message: 'Checked out and moved to Check_Out'\n                    });\n                }\n                return res.status(500).json({\n                    message: 'Failed to delete from Parking_Details after moving'\n                });\n            }\n            if (typeof active === 'boolean' && spotId) {\n                // Toggle active status for a spot\n                const result = await db.collection('Parking_Details').updateOne({\n                    spotId\n                }, {\n                    $set: {\n                        active\n                    }\n                });\n                if (result.modifiedCount === 1) {\n                    return res.status(200).json({\n                        message: 'Active status updated'\n                    });\n                }\n                return res.status(404).json({\n                    message: 'Spot not found'\n                });\n            }\n            // Otherwise handle payment\n            if (ticketNo) {\n                const result = await db.collection('Parking_Details').updateOne({\n                    ticketNo\n                }, {\n                    $set: {\n                        paid: true\n                    }\n                });\n                if (result.modifiedCount === 1) {\n                    return res.status(200).json({\n                        message: 'Payment recorded'\n                    });\n                }\n                return res.status(404).json({\n                    message: 'Ticket not found'\n                });\n            }\n            return res.status(400).json({\n                message: 'Invalid PATCH request'\n            });\n        } catch (err) {\n            console.error(err);\n            return res.status(500).json({\n                message: 'Internal Server Error'\n            });\n        }\n    }\n    if (req.method !== 'POST') {\n        res.setHeader('Allow', [\n            'GET',\n            'POST',\n            'PATCH'\n        ]);\n        return res.status(405).end();\n    }\n    const { ticketNo, spotId, name, vehicle, type } = req.body;\n    if (!ticketNo || !spotId || !name || !vehicle || !type) {\n        return res.status(400).json({\n            message: 'Missing required parking details'\n        });\n    }\n    try {\n        const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        const db = client.db('Parking_ByANI');\n        const collection = db.collection('Parking_Details');\n        const createdAt = new Date();\n        const expireAt = new Date(createdAt.getTime() + 24 * 60 * 60 * 1000);\n        const price = type === '2W' ? 250 : 425;\n        await collection.insertOne({\n            ticketNo,\n            spotId,\n            name,\n            vehicle,\n            type,\n            price,\n            createdAt,\n            expireAt,\n            paid: false,\n            active: true\n        });\n        return res.status(201).json({\n            message: 'Parking details recorded'\n        });\n    } catch (err) {\n        console.error(err);\n        return res.status(500).json({\n            message: 'Internal Server Error'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBT1csS0FBSztRQUNaQyxRQUFRQyxLQUFLLENBQUNGO1FBQ2QsT0FBTzlCLElBQUlRLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRVUsU0FBUztRQUF3QjtJQUNqRTtBQUNGIiwic291cmNlcyI6WyJGOlxcTWljcm9Tb2Z0LVBhcmtpbmdfQWxsb2NhdGlvbl9TeXN0ZW1cXFBhcmtpbmctQWxsb2NhdGlvbi1TeXN0ZW1cXHBhZ2VzXFxhcGlcXHBhcmtpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNsaWVudFByb21pc2UgZnJvbSAnLi4vLi4vbGliL21vbmdvZGInO1xyXG5cclxuLy8gQVBJIHJvdXRlIHRvIHJlY29yZCBwYXJraW5nIGRldGFpbHNcclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xyXG4gICAgLy8gUmV0dXJuIGFsbCBwYXJraW5nIGRldGFpbHNcclxuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGNsaWVudFByb21pc2U7XHJcbiAgICBjb25zdCBkYiA9IGNsaWVudC5kYignUGFya2luZ19CeUFOSScpO1xyXG4gICAgY29uc3QgcmVjb3JkcyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ1BhcmtpbmdfRGV0YWlscycpLmZpbmQoe30pLnRvQXJyYXkoKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihyZWNvcmRzKTtcclxuICB9XHJcbiAgLy8gSGFuZGxlIHBheW1lbnQgdXBkYXRlc1xyXG4gIGlmIChyZXEubWV0aG9kID09PSAnUEFUQ0gnKSB7XHJcbiAgICBjb25zdCB7IHRpY2tldE5vLCBjaGVja291dCwgc3BvdElkLCBhY3RpdmUgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZTtcclxuICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKCdQYXJraW5nX0J5QU5JJyk7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoY2hlY2tvdXQpIHtcclxuICAgICAgICAvLyBNb3ZlIHBhcmtpbmcgcmVjb3JkIHRvIENoZWNrX091dCBjb2xsZWN0aW9uIGJlZm9yZSByZW1vdmluZ1xyXG4gICAgICAgIGNvbnN0IHBhcmtpbmdDb2wgPSBkYi5jb2xsZWN0aW9uKCdQYXJraW5nX0RldGFpbHMnKTtcclxuICAgICAgICBjb25zdCBjaGVja091dENvbCA9IGRiLmNvbGxlY3Rpb24oJ0NoZWNrX091dCcpO1xyXG4gICAgICAgIGNvbnN0IHJlY29yZCA9IGF3YWl0IHBhcmtpbmdDb2wuZmluZE9uZSh7IHRpY2tldE5vIH0pO1xyXG4gICAgICAgIGlmICghcmVjb3JkKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVGlja2V0IG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCBjaGVja291dCB0aW1lXHJcbiAgICAgICAgcmVjb3JkLmNoZWNrZWRPdXRBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgYXdhaXQgY2hlY2tPdXRDb2wuaW5zZXJ0T25lKHJlY29yZCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGFya2luZ0NvbC5kZWxldGVPbmUoeyB0aWNrZXRObyB9KTtcclxuICAgICAgICBpZiAocmVzdWx0LmRlbGV0ZWRDb3VudCA9PT0gMSkge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0NoZWNrZWQgb3V0IGFuZCBtb3ZlZCB0byBDaGVja19PdXQnIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGRlbGV0ZSBmcm9tIFBhcmtpbmdfRGV0YWlscyBhZnRlciBtb3ZpbmcnIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgYWN0aXZlID09PSAnYm9vbGVhbicgJiYgc3BvdElkKSB7XHJcbiAgICAgICAgLy8gVG9nZ2xlIGFjdGl2ZSBzdGF0dXMgZm9yIGEgc3BvdFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ1BhcmtpbmdfRGV0YWlscycpLnVwZGF0ZU9uZShcclxuICAgICAgICAgIHsgc3BvdElkIH0sXHJcbiAgICAgICAgICB7ICRzZXQ6IHsgYWN0aXZlIH0gfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5tb2RpZmllZENvdW50ID09PSAxKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnQWN0aXZlIHN0YXR1cyB1cGRhdGVkJyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1Nwb3Qgbm90IGZvdW5kJyB9KTtcclxuICAgICAgfVxyXG4gICAgICAvLyBPdGhlcndpc2UgaGFuZGxlIHBheW1lbnRcclxuICAgICAgaWYgKHRpY2tldE5vKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbignUGFya2luZ19EZXRhaWxzJykudXBkYXRlT25lKFxyXG4gICAgICAgICAgeyB0aWNrZXRObyB9LFxyXG4gICAgICAgICAgeyAkc2V0OiB7IHBhaWQ6IHRydWUgfSB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZiAocmVzdWx0Lm1vZGlmaWVkQ291bnQgPT09IDEpIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdQYXltZW50IHJlY29yZGVkJyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1RpY2tldCBub3QgZm91bmQnIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnZhbGlkIFBBVENIIHJlcXVlc3QnIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIFNlcnZlciBFcnJvcicgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcclxuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnLCAnUE9TVCcsICdQQVRDSCddKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuZW5kKCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB7IHRpY2tldE5vLCBzcG90SWQsIG5hbWUsIHZlaGljbGUsIHR5cGUgfSA9IHJlcS5ib2R5O1xyXG4gIGlmICghdGlja2V0Tm8gfHwgIXNwb3RJZCB8fCAhbmFtZSB8fCAhdmVoaWNsZSB8fCAhdHlwZSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ01pc3NpbmcgcmVxdWlyZWQgcGFya2luZyBkZXRhaWxzJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlO1xyXG4gICAgY29uc3QgZGIgPSBjbGllbnQuZGIoJ1BhcmtpbmdfQnlBTkknKTtcclxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKCdQYXJraW5nX0RldGFpbHMnKTtcclxuXHJcbiAgICBjb25zdCBjcmVhdGVkQXQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgZXhwaXJlQXQgPSBuZXcgRGF0ZShjcmVhdGVkQXQuZ2V0VGltZSgpICsgMjQgKiA2MCAqIDYwICogMTAwMCk7XHJcbiAgICBjb25zdCBwcmljZSA9IHR5cGUgPT09ICcyVycgPyAyNTAgOiA0MjU7XHJcblxyXG4gICAgYXdhaXQgY29sbGVjdGlvbi5pbnNlcnRPbmUoe1xyXG4gICAgICB0aWNrZXRObyxcclxuICAgICAgc3BvdElkLFxyXG4gICAgICBuYW1lLFxyXG4gICAgICB2ZWhpY2xlLFxyXG4gICAgICB0eXBlLFxyXG4gICAgICBwcmljZSxcclxuICAgICAgY3JlYXRlZEF0LFxyXG4gICAgICBleHBpcmVBdCxcclxuICAgICAgcGFpZDogZmFsc2UsXHJcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgLy8gcGRmIGlzIGdlbmVyYXRlZCBvbiBjbGllbnQgc2lkZTsgUERGIHN0b3JhZ2Ugbm90IGltcGxlbWVudGVkXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnUGFya2luZyBkZXRhaWxzIHJlY29yZGVkJyB9KTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY2xpZW50UHJvbWlzZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJjbGllbnQiLCJkYiIsInJlY29yZHMiLCJjb2xsZWN0aW9uIiwiZmluZCIsInRvQXJyYXkiLCJzdGF0dXMiLCJqc29uIiwidGlja2V0Tm8iLCJjaGVja291dCIsInNwb3RJZCIsImFjdGl2ZSIsImJvZHkiLCJwYXJraW5nQ29sIiwiY2hlY2tPdXRDb2wiLCJyZWNvcmQiLCJmaW5kT25lIiwibWVzc2FnZSIsImNoZWNrZWRPdXRBdCIsIkRhdGUiLCJpbnNlcnRPbmUiLCJyZXN1bHQiLCJkZWxldGVPbmUiLCJkZWxldGVkQ291bnQiLCJ1cGRhdGVPbmUiLCIkc2V0IiwibW9kaWZpZWRDb3VudCIsInBhaWQiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJzZXRIZWFkZXIiLCJlbmQiLCJuYW1lIiwidmVoaWNsZSIsInR5cGUiLCJjcmVhdGVkQXQiLCJleHBpcmVBdCIsImdldFRpbWUiLCJwcmljZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/parking.js\n");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparking&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparking.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();